"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[4683],{32682:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return l},default:function(){return s}});var n=a(87462),o=a(63366),i=(a(15007),a(64983)),r=a(91515),m=["components"],l={},d={_frontmatter:l},p=r.Z;function s(e){var t=e.components,a=(0,o.Z)(e,m);return(0,i.mdx)(p,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"add-a-category-attribute"},"Add a category attribute"),(0,i.mdx)("p",null,"Category attributes were automatically displayed in the ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/admin"},"admin")," panel of Magento 1. In Magento 2, it is necessary to explicitly render it with a ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/ui-component"},"UI Component"),". This is quite easy to do and provides a great degree of control over the form input. In the code examples below, replace ",(0,i.mdx)("inlineCode",{parentName:"p"},"attribute_id")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"Your Category Attribute Name")," with your own values."),(0,i.mdx)("h2",{id:"step-1-create-the-attribute"},"Step #1: Create the attribute"),(0,i.mdx)("p",null,"The following is a full example of an install script that creates a ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/category"},"category")," attribute. If you already have a category attribute, it is not necessary."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-php"},"// File: Namespace/Module/Setup/InstallData.php\n\nnamespace Namespace\\Module\\Setup;\n\nuse Magento\\Framework\\Setup\\{\n    ModuleContextInterface,\n    ModuleDataSetupInterface,\n    InstallDataInterface\n};\n\nuse Magento\\Eav\\Setup\\EavSetup;\nuse Magento\\Eav\\Setup\\EavSetupFactory;\n\nclass InstallData implements InstallDataInterface\n{\n    private $eavSetupFactory;\n\n    public function __construct(EavSetupFactory $eavSetupFactory) {\n        $this->eavSetupFactory = $eavSetupFactory;\n    }\n\n    public function install(ModuleDataSetupInterface $setup, ModuleContextInterface $context)\n    {\n        $eavSetup = $this->eavSetupFactory->create(['setup' => $setup]);\n        $eavSetup->addAttribute(\\Magento\\Catalog\\Model\\Category::ENTITY, 'attribute_id', [\n            'type'     => 'int',\n            'label'    => 'Your Category Attribute Name',\n            'input'    => 'boolean',\n            'source'   => 'Magento\\Eav\\Model\\Entity\\Attribute\\Source\\Boolean',\n            'visible'  => true,\n            'default'  => '0',\n            'required' => false,\n            'global'   => \\Magento\\Eav\\Model\\Entity\\Attribute\\ScopedAttributeInterface::SCOPE_STORE,\n            'group'    => 'Display Settings',\n        ]);\n    }\n}\n")),(0,i.mdx)("h2",{id:"step-2-display-the-attribute"},"Step #2: Display the attribute"),(0,i.mdx)("p",null,"The category UI Component is rendered with configuration from the ",(0,i.mdx)("inlineCode",{parentName:"p"},"category_form.xml")," file. All files with that name are merged together. As a result, you can add a field by creating a ",(0,i.mdx)("inlineCode",{parentName:"p"},"category_form.xml")," file in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"view/adminhtml/ui_component")," directory in your ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/module"},"module"),"."),(0,i.mdx)("p",null,'Here is a full example of adding a field under the "Display Settings" group. It is important to note that ',(0,i.mdx)("inlineCode",{parentName:"p"},"attribute_id")," should match the ID of the attribute that you created in the install script."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- Namespace/Module/view/adminhtml/ui_component/category_form.xml --\x3e\n<?xml version="1.0"?>\n<form xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Ui:etc/ui_configuration.xsd">\n    <fieldset name="display_settings">\n        <field name="attribute_id">\n            <argument name="data" xsi:type="array">\n                <item name="config" xsi:type="array">\n                    <item name="dataType" xsi:type="string">boolean</item>\n                    <item name="formElement" xsi:type="string">checkbox</item>\n                    <item name="label" xsi:type="string" translate="true">Your Category Attribute Name</item>\n                    <item name="prefer" xsi:type="string">toggle</item>\n                    <item name="valueMap" xsi:type="array">\n                        <item name="true" xsi:type="string">1</item>\n                        <item name="false" xsi:type="string">0</item>\n                    </item>\n                    <item name="default" xsi:type="number">0</item>\n                </item>\n            </argument>\n        </field>\n    </fieldset>\n</form>\n')),(0,i.mdx)("h2",{id:"step-3-upgrade-and-run"},"Step #3: Upgrade and run"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/install-gde/install/cli/install-cli-subcommands-db-upgr.html"},"Upgrade the database schema")," to install the attribute ",(0,i.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/commerce/php/development/components/clear-directories/#how-to-clear-the-directories"},"and clear your cache"),"."),(0,i.mdx)("h2",{id:"how-it-works"},"How it works"),(0,i.mdx)("p",null,"UI Component configuration is merged. When you add a new file, the application will merge that with the base UI Component configuration file. In the example above, that is ",(0,i.mdx)("inlineCode",{parentName:"p"},"category_form.xml"),". The nodes inside of that reflect the structure of the base file. There are only two nodes necessary in this case before the custom field is added: ",(0,i.mdx)("inlineCode",{parentName:"p"},"<form>")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"<fieldset>"),". Inside of that, the ",(0,i.mdx)("inlineCode",{parentName:"p"},"<field>")," node is used to add a field with a name that matches the id of the attribute you want to render."),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"<field>")," node is declared originally in ",(0,i.mdx)("inlineCode",{parentName:"p"},"vendor/magento/module-ui/view/base/ui_component/etc/definition.xml"),". If you open that file and look for ",(0,i.mdx)("inlineCode",{parentName:"p"},"<field>"),", you will notice that there is only a PHP class referencedâ€”nothing particularly helpful. This is where the ",(0,i.mdx)("inlineCode",{parentName:"p"},"config")," elements in the example above come in important. Notice the value of ",(0,i.mdx)("inlineCode",{parentName:"p"},'<item name="formElement">')," (",(0,i.mdx)("inlineCode",{parentName:"p"},"checkbox"),")? Now, if you look in ",(0,i.mdx)("inlineCode",{parentName:"p"},"definition.xml"),", you will find a ",(0,i.mdx)("inlineCode",{parentName:"p"},"<checkbox>")," node that has some configuration values. In the PHP class that the ",(0,i.mdx)("inlineCode",{parentName:"p"},"<field>")," element references, it looks up the ",(0,i.mdx)("inlineCode",{parentName:"p"},"formElement")," to use and loads that. As a result, ",(0,i.mdx)("inlineCode",{parentName:"p"},"<checkbox>")," is the node. In this case, that has the information that we are looking for."),(0,i.mdx)("p",null,"One of those elements is particularly useful when determining what XML you need to provide for your field: ",(0,i.mdx)("inlineCode",{parentName:"p"},'<item name="component">'),". That is a Javascript file that handles the functionality of the field. In our case, it is located in ",(0,i.mdx)("inlineCode",{parentName:"p"},"vendor/magento/module-ui/view/base/web/js/form/element/single-checkbox.js"),". If you open that file, there is a ",(0,i.mdx)("inlineCode",{parentName:"p"},"defaults")," object which contains values that can be modified through the XML above. For example, notice: ",(0,i.mdx)("inlineCode",{parentName:"p"},"defaults.prefer: 'checkbox'"),". In the XML above, we declared ",(0,i.mdx)("inlineCode",{parentName:"p"},'<item name="prefer">toggle</item>'),". As a result, the ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/xml"},"XML")," value overrides the default value, and the ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/javascript"},"Javascript")," renders a toggle instead of a plain checkbox."),(0,i.mdx)("p",null,"This opens up the opportunity for you to customize nearly anything about the UI Component. It also should provide you with a basis of how to determine what configuration is available for you to set through XML."))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-ui-components-howto-add-category-attribute-md-a9c42f87e45b0d912f5c.js.map
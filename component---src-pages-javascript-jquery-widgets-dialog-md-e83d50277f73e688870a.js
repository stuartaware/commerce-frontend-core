"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[3474],{45618:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return l},default:function(){return s}});var a=t(87462),o=t(63366),d=(t(15007),t(64983)),i=t(91515),p=["components"],l={},r={_frontmatter:l},m=i.Z;function s(e){var n=e.components,t=(0,o.Z)(e,p);return(0,d.mdx)(m,(0,a.Z)({},r,t,{components:n,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"dropdowndialog-widget"},"DropdownDialog widget"),(0,d.mdx)("p",null,"The dropdownDialog ",(0,d.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/widget"},"widget")," is a customization of the standard ",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/"},"jQuery UI Dialog"),". As extra functionality it implements the following:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"triggering ",(0,d.mdx)("a",{parentName:"li",href:"https://glossary.magento.com/event"},"event")," for opening"),(0,d.mdx)("li",{parentName:"ul"},"delaying to automatically close the drop-down on mouse out"),(0,d.mdx)("li",{parentName:"ul"},"clicking outside the area closes the drop-down")),(0,d.mdx)("p",null,"The dropdownDialog widget source is located in ",(0,d.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/web/mage/dropdown.js"},"lib/web/mage/dropdown.js"),"."),(0,d.mdx)("h2",{id:"initialize"},"Initialize"),(0,d.mdx)("p",null,"For information about how to initialize a widget in a JS component or ",(0,d.mdx)("inlineCode",{parentName:"p"},".phtml")," template, see the ",(0,d.mdx)("a",{parentName:"p",href:"../init.md"},"Initialize JavaScript")," topic."),(0,d.mdx)("h2",{id:"options"},"Options"),(0,d.mdx)("p",null,"The customized Dialog widget has default ",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/"},"jQuery UI Dialog widget")," options, plus several custom options."),(0,d.mdx)("h3",{id:"autoposition"},(0,d.mdx)("inlineCode",{parentName:"h3"},"autoPosition")),(0,d.mdx)("p",null,"Specifies if the ",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/#option-position"},(0,d.mdx)("inlineCode",{parentName:"a"},"position"))," option is used for calculating the drop-down offset."),(0,d.mdx)("p",null,"If set to ",(0,d.mdx)("inlineCode",{parentName:"p"},"false")," (default value), then ",(0,d.mdx)("inlineCode",{parentName:"p"},"position")," rules are not used and the drop-down is positioned under the element for which the widget is initialized. Otherwise the drop-down offset is calculated using the ",(0,d.mdx)("inlineCode",{parentName:"p"},"position")," rules."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": Boolean"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"false")),(0,d.mdx)("h3",{id:"autoopen"},(0,d.mdx)("inlineCode",{parentName:"h3"},"autoOpen")),(0,d.mdx)("p",null,"Specifies if the drop-down should open after page load."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": Boolean"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"false")),(0,d.mdx)("h3",{id:"autosize"},(0,d.mdx)("inlineCode",{parentName:"h3"},"autoSize")),(0,d.mdx)("p",null,"Specifies if the size of the drop-down is defined by widget options (",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/#option-height"},"height"),", ",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/#option-width"},"width"),", ",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/#option-minHeight"},"minHeight"),", ",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/#option-minWidth"},"minWidth"),")."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": Boolean"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"false")),(0,d.mdx)("h3",{id:"closeonmouseleave"},(0,d.mdx)("inlineCode",{parentName:"h3"},"closeOnMouseLeave")),(0,d.mdx)("p",null,"Specifies if the drop-down is closed when mouse pointer is moved out."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": Boolean"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"true")),(0,d.mdx)("h3",{id:"closeonclickoutside"},(0,d.mdx)("inlineCode",{parentName:"h3"},"closeOnClickOutside")),(0,d.mdx)("p",null,"Specifies if the drop-down is closed on mouse click outside the drop-down."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": Boolean"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"true")),(0,d.mdx)("h3",{id:"createtitlebar"},(0,d.mdx)("inlineCode",{parentName:"h3"},"createTitleBar")),(0,d.mdx)("p",null,"Defines if the ",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/#option-title"},"title")," option is used for displaying the title bar."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": Boolean"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"false")),(0,d.mdx)("h3",{id:"defaultdialogclass"},(0,d.mdx)("inlineCode",{parentName:"h3"},"defaultDialogClass")),(0,d.mdx)("p",null,"Class that is added to the drop-down, when it gets initialized."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": String"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"mage-dropdown-dialog")),(0,d.mdx)("p",null,"Class that is added/removed on drop-down content when it gets opened/closed."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": String"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"null")),(0,d.mdx)("h3",{id:"parentclass"},(0,d.mdx)("inlineCode",{parentName:"h3"},"parentClass")),(0,d.mdx)("p",null,"Class that is added/removed for the dropdown parent, when the drop-down gets opened/closed."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": String"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"null")),(0,d.mdx)("h3",{id:"triggerclass"},(0,d.mdx)("inlineCode",{parentName:"h3"},"triggerClass")),(0,d.mdx)("p",null,"Class that is added/removed on the trigger element when the drop-down gets opened/closed."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": String"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"null")),(0,d.mdx)("h3",{id:"triggerevent"},(0,d.mdx)("inlineCode",{parentName:"h3"},"triggerEvent")),(0,d.mdx)("p",null,"Name of the event that triggers the ",(0,d.mdx)("inlineCode",{parentName:"p"},"open()")," function for drop-down."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": String"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"click")),(0,d.mdx)("h3",{id:"triggertarget"},(0,d.mdx)("inlineCode",{parentName:"h3"},"triggerTarget")),(0,d.mdx)("p",null,"Element that triggers the drop-down."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),":"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"String"),(0,d.mdx)("li",{parentName:"ul"},"jQuery object")),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": ",(0,d.mdx)("inlineCode",{parentName:"p"},"null")),(0,d.mdx)("h3",{id:"timeout"},(0,d.mdx)("inlineCode",{parentName:"h3"},"timeout")),(0,d.mdx)("p",null,"The number of milliseconds until the dropdown is closed after mouse pointer moves out."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Type"),": Number"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Default value"),": 500"),(0,d.mdx)("h2",{id:"methods"},"Methods"),(0,d.mdx)("p",null,"The customized dropdownDialog widget has default ",(0,d.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/dialog/"},"jQuery UI Dialog widget")," methods, though some of them are customized."),(0,d.mdx)("p",null,"Customized public methods:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"#open"},"open()")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"#close"},"close()"))),(0,d.mdx)("h3",{id:"open"},(0,d.mdx)("inlineCode",{parentName:"h3"},"open()")),(0,d.mdx)("p",null,"Beside default functionality, this method calls the ",(0,d.mdx)("inlineCode",{parentName:"p"},"_mouseLeave()")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"_mouseEnter()")," functions, adds classes on trigger and drop-down parent, and binds the close on mouse click outside drop-down to the ",(0,d.mdx)("inlineCode",{parentName:"p"},"<body>")," element."),(0,d.mdx)("p",null,"Invoke the open method:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-javascript"},'$("#element").dropdownDialog("open");\n')),(0,d.mdx)("h3",{id:"close"},(0,d.mdx)("inlineCode",{parentName:"h3"},"close()")),(0,d.mdx)("p",null,"Beside default functionality, this method removes the classes from trigger and drop-down parent.Also clears the timeout if the latter exists."),(0,d.mdx)("p",null,"Invoke the close method:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-javascript"},'$("#element").dropdownDialog("close");\n')),(0,d.mdx)("h2",{id:"code-sample"},"Code sample"),(0,d.mdx)("p",null,"The following example shows how to initialize the dropdown dialog widget and pass options during the initialization.\nThis example uses some CSS classes that are used for minicart."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-html"},'<div data-block="dropdown" class="minicart-wrapper">\n    <button type="button" class="action" data-trigger="trigger">\n        <span data-bind="i18n: \'Click Here\'"></span>\n    </button>\n</div>\n<div class="block block-minicart"\n     data-mage-init=\'{\n        "dropdownDialog": {\n            "appendTo": "[data-block=dropdown]",\n            "triggerTarget":"[data-trigger=trigger]",\n            "timeout": 2000,\n            "closeOnMouseLeave": false,\n            "closeOnEscape": true,\n            "autoOpen": true,\n            "triggerClass": "active",\n            "parentClass": "active",\n            "buttons": []\n        }\n     }\'>\n    <div id="minicart-content-wrapper">\n        Here is our content\n    </div>\n</div>\n')),(0,d.mdx)("p",null,"The following example shows a PHTML file using the script and custom CSS classes that have no defined properties:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-php"},"<?php\n/** @var \\Magento\\Framework\\Escaper $escaper */\n?>\n\n<div class=\"dropdown-wrap\">\n    <button class=\"dropdown-button\">\n        <span><?= $escaper->escapeHtml(__('Dropdown open button')) ?></span>\n    </button>\n    <div id=\"dropdown-dialog\" data-role=\"dropdownDialog\">\n        <?= $escaper->escapeHtml(__('Dropdown content')) ?>\n    </div>\n</div>\n\n<script type=\"text/javascript\">\n    require([\n        'jquery',\n        'dropdownDialog'\n        ], function($, dropdownDialog) {\n            'use strict';\n\n            $('#dropdown-dialog').dropdownDialog({\n                appendTo: '.dropdown-wrap',\n                triggerTarget: '.dropdown-button',\n                closeOnMouseLeave: false,\n                closeOnEscape: true,\n                timeout: 2000,\n                triggerClass: 'active',\n                parentClass: 'active',\n                buttons: [{\n                    text: $.mage.__('Close'),\n                    click: function () {\n                        $(this).dropdownDialog(\"close\");\n                    }\n                }]\n            });\n        }\n    );\n<\/script>\n")),(0,d.mdx)("h3",{id:"result"},"Result"),(0,d.mdx)("p",null,"The result is a dropdown dialog and a button (",(0,d.mdx)("em",{parentName:"p"},"Click Here"),") that opens the dialog."),(0,d.mdx)("p",null,(0,d.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"350px"}},"\n      ",(0,d.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"35.625%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,d.mdx)("picture",{parentName:"span"},"\n          ",(0,d.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/8e19fa387487d42f31bcf3c7946b8f58/cb523/dropdown-dialog-widget-result.webp 320w","/commerce-frontend-core/static/8e19fa387487d42f31bcf3c7946b8f58/d1603/dropdown-dialog-widget-result.webp 350w"],sizes:"(max-width: 350px) 100vw, 350px",type:"image/webp"}),"\n          ",(0,d.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/8e19fa387487d42f31bcf3c7946b8f58/72799/dropdown-dialog-widget-result.png 320w","/commerce-frontend-core/static/8e19fa387487d42f31bcf3c7946b8f58/13ae7/dropdown-dialog-widget-result.png 350w"],sizes:"(max-width: 350px) 100vw, 350px",type:"image/png"}),"\n          ",(0,d.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/8e19fa387487d42f31bcf3c7946b8f58/13ae7/dropdown-dialog-widget-result.png",alt:"DropdownDialog Widget",title:"DropdownDialog Widget",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-javascript-jquery-widgets-dialog-md-e83d50277f73e688870a.js.map